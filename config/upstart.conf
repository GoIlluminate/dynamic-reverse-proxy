start on startup
stop on shutdown

script
   echo $$ > /var/run/illuminate-reverse-proxy.pid
   exec sudo -u softekadmin /usr/bin/node /home/softekadmin/applications/reverse-proxy/index.js >> /var/log/illuminate-reverse-proxy.log 2>&1
end script

pre-start script
   echo "[`date -u +%Y-%m-%dT%T.%3NZ`] (sys) Starting" >> /var/log/illuminate-reverse-proxy.log
end script

pre-stop script
   rm /var/run/illuminate-reverse-proxy.pid
   echo "[`date -u +%Y-%m-%dT%T.%3NZ`] (sys) Stopping" >> /var/log/illuminate-reverse-proxy.log
end script

# Automatically restart this service up to 10 times within 5 seconds.
# If the service fails more than 10 times in 5 seconds, stop the job and mark it as failed.
respawn
respawn limit 10 5
